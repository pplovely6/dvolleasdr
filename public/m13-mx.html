<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M13 Mixte | AS Dardilly</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Anton&family=Outfit:wght@300;400;500;700;800&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="player-style.css">
    <style>
        /* --- EXACT LAYOUT COPY FROM M18 --- */
        .results-container {
            width: 90%;
            max-width: 1400px;
            margin: 60px auto 0;
        }

        .split-results {
            display: grid;
            grid-template-columns: 1.2fr 1px 1fr;
            gap: 40px;
            align-items: stretch;
            width: 100%;
        }

        .table-responsive {
            margin: 0 !important;
            width: 100%;
            height: 100%;
        }

        #match-container {
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .vertical-divider {
            width: 1px;
            background: #333;
            height: 100%;
            opacity: 0.5;
        }

        /* CARD STYLES */
        .match-card,
        .next-match-card {
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 0;
            padding: 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100%;
            position: relative;
            overflow: hidden;
        }

        .match-card::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 300px;
            height: 300px;
            background-image: url('image_fd6867.png');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            opacity: 0.05;
            pointer-events: none;
        }

        .card-header-label {
            color: var(--brand-yellow);
            font-family: var(--font-head);
            font-size: 2rem;
            margin-bottom: 25px;
            text-transform: uppercase;
            letter-spacing: 1px;
            z-index: 2;
        }

        .card-date {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 35px;
            color: #fff;
            background: #333;
            display: inline-block;
            padding: 8px 25px;
            border-radius: 4px;
            z-index: 2;
        }

        .teams-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            margin-bottom: 20px;
            z-index: 2;
            padding: 0 10px;
        }

        .team-block {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 35%;
            text-align: center;
        }

        .team-logo {
            height: 80px;
            width: 80px;
            object-fit: contain;
            margin-bottom: 15px;
        }

        .team-placeholder {
            height: 80px;
            width: 80px;
            background: #252525;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #555;
            margin-bottom: 15px;
            font-family: var(--font-head);
            font-size: 1.5rem;
        }

        .team-name {
            font-weight: 700;
            font-size: 1rem;
            text-transform: uppercase;
            line-height: 1.3;
            color: #ddd;
        }

        .center-info {
            width: 30%;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .vs-text {
            font-family: var(--font-head);
            font-size: 3rem;
            color: #444;
        }

        .match-location {
            border-top: 1px solid #333;
            padding-top: 20px;
            color: #aaa;
            font-size: 0.9rem;
            width: 100%;
            text-align: center;
            margin-top: 20px;
            z-index: 2;
        }

        /* --- NEW FOOTER STYLES --- */
        .dardilly-footer {
            background: #0f0f0f;
            border-top: 1px solid #333;
            padding: 80px 0 30px;
            margin-top: 80px;
            font-family: 'Outfit', sans-serif;
        }

        .footer-container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 1.5fr;
            gap: 80px;
            margin-bottom: 60px;
        }

        .footer-branding {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .footer-logo-text {
            font-family: var(--font-head);
            font-size: 2.5rem;
            color: var(--brand-yellow);
            text-transform: uppercase;
            line-height: 1;
        }

        .brand-desc {
            color: #888;
            line-height: 1.6;
            max-width: 300px;
            font-size: 0.95rem;
        }

        .footer-socials {
            display: flex;
            gap: 15px;
            margin-top: 10px;
        }

        .social-link {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #1a1a1a;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            border: 1px solid #333;
            transition: 0.3s;
        }

        .social-link:hover {
            background: var(--brand-yellow);
            color: black;
            border-color: var(--brand-yellow);
        }

        .footer-nav-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
        }

        .nav-col h4 {
            color: white;
            text-transform: uppercase;
            margin-bottom: 25px;
            font-size: 1.1rem;
            letter-spacing: 1px;
        }

        .nav-col a {
            display: block;
            color: #888;
            margin-bottom: 12px;
            text-decoration: none;
            transition: 0.3s;
            font-size: 0.95rem;
        }

        .nav-col a:hover {
            color: var(--brand-yellow);
            padding-left: 5px;
        }

        .nav-col .arrow {
            color: var(--brand-yellow);
            font-size: 0.8rem;
            vertical-align: top;
        }

        .copyright {
            text-align: center;
            border-top: 1px solid #222;
            padding-top: 30px;
            color: #555;
            font-size: 0.9rem;
        }

        /* --- RESPONSIVE FIXES --- */
        @media (max-width: 1100px) {
            .split-results {
                grid-template-columns: 1fr;
                gap: 40px;
            }

            .vertical-divider {
                display: none;
            }

            .table-responsive {
                padding-right: 0;
            }

            .match-card,
            .next-match-card {
                height: auto;
                padding: 30px 15px;
            }

            .team-logo,
            .team-placeholder {
                height: 60px;
                width: 60px;
            }

            .footer-container {
                grid-template-columns: 1fr;
                gap: 50px;
            }

            .footer-nav-grid {
                grid-template-columns: 1fr 1fr;
            }
        }

        @media (max-width: 900px) {
            .roster-container {
                grid-template-columns: 1fr !important;
                gap: 0 !important;
            }

            .roster-image {
                min-height: 250px !important;
                border-radius: 8px 8px 0 0;
            }

            .roster-content {
                padding: 0 !important;
            }

            .roster-header {
                padding: 15px 10px !important;
            }

            .footer-nav-grid {
                grid-template-columns: 1fr;
                gap: 30px;
            }

            .footer-logo-text {
                font-size: 2rem;
            }

            .hero h1 {
                font-size: 3.5rem !important;
            }
        }
    </style>
</head>

<body>

    <header>
        <div class="brand"><a href="index.html"><img src="image_fd6867.png" alt="Logo"></a></div>
        <nav id="main-nav">
            <ul>
                <li><a href="index.html" data-i18n="nav_home">Accueil</a></li>
                <li><a href="equipes.html" data-i18n="nav_teams">Les Équipes</a></li>
                <li><a href="planning.html" data-i18n="planning_title">PLANNING</a></li>
                <li><a href="results.html" data-i18n="matches_title">RÉSULTATS</a></li>
                <li><a href="contact.html" data-i18n="nav_contact">Contact</a></li>
            </ul>
        </nav>
        <div style="display:flex; align-items:center; gap: 15px;">
            <a href="inscription.html" class="btn-join" data-i18n="btn_join">Rejoindre</a>
            <div class="lang-switch">
                <button onclick="window.setLanguage('fr')" class="lang-btn">FR</button>
                <button onclick="window.setLanguage('en')" class="lang-btn">EN</button>
            </div>
            <button id="mobile-toggle-btn" class="mobile-toggle"><i class="fa-solid fa-bars"></i></button>
        </div>
    </header>

    <main>
        <div class="hero"
            style="height: 40vh; background: linear-gradient(rgba(0,0,0,0.7), rgba(15,17,21,1)), url('m13mx-photo.jpg'); display:flex; align-items:flex-end; padding-bottom:40px; padding-left:5%; background-size: cover; background-position: center;">
            <div>
                <h1
                    style="font-family: var(--font-head); font-size: 5rem; text-transform: uppercase; line-height: 1; margin:0;">
                    M13 <span style="color:var(--brand-yellow);">MIXTE</span></h1>
                <p style="color: #bbb; letter-spacing: 2px; font-weight: 600; margin-top:10px;">SAISON 2025 / 2026</p>
            </div>
        </div>

        <section class="results-container">
            <h2 class="section-title" data-i18n="matches_title">Calendrier & <span>Résultats</span></h2>

            <div class="split-results">
                <div class="table-responsive">
                    <div id="match-container">
                        <p style="color:#666; text-align:center;">Chargement du dernier match...</p>
                    </div>
                </div>

                <div class="vertical-divider"></div>

                <div class="next-match-card">
                    <div class="card-header-label" data-i18n="nm_title">PROCHAIN MATCH</div>
                    <div class="card-date" id="nm-date">--</div>

                    <div class="teams-row">
                        <div class="team-block">
                            <img src="image_fd6867.png" alt="AS Dardilly" class="team-logo">
                            <div class="team-name" id="nm-home">AS DARDILLY</div>
                        </div>
                        <div class="center-info">
                            <div class="vs-text" data-i18n="nm_vs">VS</div>
                        </div>
                        <div class="team-block">
                            <div class="team-placeholder" id="nm-away-ph">ADV</div>
                            <div class="team-name" id="nm-away">ADVERSAIRE</div>
                        </div>
                    </div>

                    <div class="match-location">
                        <i class="fa-solid fa-location-dot" style="color: var(--brand-yellow); margin-right: 5px;"></i>
                        <strong id="nm-loc">Gymnase...</strong>
                    </div>
                </div>
            </div>
        </section>

        <section
            style="background: #1a1d24; border-top: 1px solid #333; padding-top: 100px; margin-top: 60px; padding-bottom: 60px;">
            <h2 class="section-title" style="width:90%; max-width:1400px; margin:0 auto 40px;" data-i18n="roster_title">
                L'Effectif <span>2025-26</span></h2>
            <div class="roster-container"
                style="width:90%; max-width:1400px; margin:0 auto; display:grid; grid-template-columns: 1fr 1.5fr; gap:40px;">
                <div class="roster-image"
                    style="background-image: url('m13mx-photo.jpg'); background-size: cover; background-position: center; min-height: 500px; border-radius: 0;">
                </div>

                <div class="roster-content" style="padding: 0;">
                    <div class="roster-header"
                        style="display:grid; grid-template-columns: 60px 1fr 120px 24px; padding: 15px 0; border-bottom: 1px solid #444; color:#888; font-weight:bold; font-size:0.85rem; text-transform:uppercase; letter-spacing:1px;">
                        <span>N°</span>
                        <span data-i18n="hdr_player">JOUEUR</span>
                        <span data-i18n="hdr_pos">POSTE</span>
                        <span></span>
                    </div>
                    <div id="roster-list"></div>
                </div>
            </div>
        </section>
    </main>

    <footer class="dardilly-footer">
        <div class="footer-container">
            <div class="footer-branding">
                <div class="footer-logo-text">AS DARDILLY</div>
                <p class="brand-desc" data-i18n="footer_desc">Le club historique de l'Ouest Lyonnais. Formation,
                    compétition et convivialité depuis 1944.</p>
                <div class="footer-socials">
                    <a href="#" class="social-link"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-youtube"></i></a>
                    <a href="#" class="social-link"><i class="fa-brands fa-x-twitter"></i></a>
                </div>
            </div>
            <div class="footer-nav-grid">
                <div class="nav-col">
                    <h4 data-i18n="footer_club">Le Club</h4>
                    <a href="index.html" data-i18n="nav_home">Accueil</a>
                    <a href="equipes.html" data-i18n="nav_teams">Équipes</a>
                    <a href="contact.html" data-i18n="nav_contact">Contact</a>
                </div>
                <div class="nav-col">
                    <h4 data-i18n="footer_practical">Pratique</h4>
                    <a href="inscription.html" data-i18n="nav_register">Inscriptions</a>
                    <a href="planning.html" data-i18n="footer_planning">Planning</a>
                    <a href="#" data-i18n="footer_gyms">Gymnases</a>
                </div>
                <div class="nav-col">
                    <h4 data-i18n="footer_links">Liens Utiles</h4>
                    <a href="#">FFVB</a>
                    <a href="#">Ligue AuRA</a>
                    <a href="#">Mairie Dardilly <span class="arrow">↗</span></a>
                </div>
            </div>
        </div>
        <div class="copyright" data-i18n="footer_rights">© 2025 AS Dardilly Volley. Tous droits réservés.</div>
    </footer>

    <script src="lang.js"></script>
    <script src="player-db.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const API_BASE = "/api";
            const FILES = {
                players: "db-m13-mx",
                matches: "matches-db",
                schedule: "schedule-m13-mx"
            };

            fetch(`${API_BASE}/data/${FILES.schedule}`)
                .then(res => res.json())
                .then(data => {
                    const list = data.schedule || [];
                    const nextMatch = list[0];
                    if (nextMatch) {
                        document.getElementById('nm-date').innerText = `${nextMatch.date} • ${nextMatch.time}`;
                        document.getElementById('nm-home').innerText = nextMatch.home;
                        document.getElementById('nm-away').innerText = nextMatch.away;
                        document.getElementById('nm-away-ph').innerText = nextMatch.away.substring(0, 3).toUpperCase();
                        document.getElementById('nm-loc').innerText = nextMatch.location;
                    } else {
                        document.querySelector('.next-match-card').innerHTML = "<p style='color:#777; text-align:center; margin-top:50px;'>Aucun match prévu.</p>";
                    }
                }).catch(e => console.error("Schedule Error", e));

            fetch(`${API_BASE}/data/${FILES.matches}`)
                .then(res => res.json())
                .then(data => {
                    const container = document.getElementById('match-container');
                    if (!container) return;
                    container.innerHTML = "";
                    const matches = (data.matches || []).filter(m => m.category === "M13 MIXTE").slice(-1);
                    if (matches.length === 0) {
                        container.innerHTML = "<p style='padding:20px; color:#888; text-align:center;'>Aucun résultat disponible.</p>";
                    } else {
                        matches.forEach(m => {
                            const setsLine = Array.isArray(m.sets) ? m.sets.join(" ") : m.sets;
                            const scoreParts = (m.score || "0-0").split(/[-:]/).map(s => parseInt(s.trim()));
                            const homeScore = scoreParts[0] || 0;
                            const awayScore = scoreParts[1] || 0;
                            const isHome = m.home.toUpperCase().includes("DARDILLY");
                            const isWin = isHome ? (homeScore > awayScore) : (awayScore > homeScore);
                            const homeWin = homeScore > awayScore;
                            const awayWin = awayScore > homeScore;
                            const homeLogo = m.home.includes("DARDILLY") ? '<img src="image_fd6867.png" class="mini-logo-v3">' : '<div class="logo-spacer"></div>';
                            const awayLogo = m.away.includes("DARDILLY") ? '<img src="image_fd6867.png" class="mini-logo-v3">' : '<div class="logo-spacer"></div>';
                            container.innerHTML = `
                                <div class="match-card-v3" style="border-left: 6px solid var(--${isWin ? 'win' : 'loss'});">
                                    <div class="match-main-v3">
                                        <div class="match-header-v3">
                                            <span class="m-category-tag">${m.category}</span>
                                            <span class="m-date-v3">${m.date}</span>
                                        </div>
                                        <div class="match-body-v3">
                                            <div class="m-teams-col">
                                                <div class="m-team-row ${homeWin ? 'winner' : 'loser'}">
                                                    ${homeLogo}
                                                    <span>${m.home}</span>
                                                </div>
                                                <div class="m-team-row ${awayWin ? 'winner' : 'loser'}">
                                                    ${awayLogo}
                                                    <span>${m.away}</span>
                                                </div>
                                            </div>
                                            <div class="m-score-col">
                                                <div class="m-score-main-v3">${m.score.replace('-', ' - ')}</div>
                                                <div class="m-sets-v3">${setsLine}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            `;
                        });
                    }
                });

            fetch(`${API_BASE}/data/${FILES.players}`)
                .then(res => res.json())
                .then(data => {
                    const list = document.getElementById('roster-list');
                    if (list) {
                        list.innerHTML = "";
                        (data.players || []).filter(p => p.number).sort((a, b) => a.number - b.number).forEach(p => {
                            const row = document.createElement("a");
                            row.href = (p.profile && p.profile !== "#") ? p.profile : "javascript:void(0)";
                            row.className = "roster-row";
                            row.innerHTML = `<span class="num">${p.number}</span><span>${p.name} ${p.captain ? '<span class="captain">C</span>' : ''}</span><span class="pos">${p.position || ""}</span><i class="fa-solid fa-chevron-right"></i>`;
                            list.appendChild(row);
                        });
                    }
                    if (window.setLanguage) window.setLanguage(localStorage.getItem('language') || 'fr');
                });
        });
    </script>
</body>

</html>